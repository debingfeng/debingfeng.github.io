(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{222:function(t,e,s){"use strict";s.r(e);var r=s(0),a=Object(r.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[t._m(0),t._v(" "),s("p"),t._m(1),s("p"),t._v(" "),t._m(2),t._v(" "),t._m(3),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._m(7),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://www.npmjs.com/package/koa-router",target:"_blank",rel:"noopener noreferrer"}},[t._v("路由koa-router"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/koajs/logger#readme",target:"_blank",rel:"noopener noreferrer"}},[t._v("日志查看koa-logger"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://www.npmjs.com/package/@koa/cors",target:"_blank",rel:"noopener noreferrer"}},[t._v("设置跨域请求中间@koa/cors"),s("OutboundLink")],1)])]),t._v(" "),t._m(8),t._m(9),t._v(" "),t._m(10),t._v(" "),t._m(11),t._m(12),t._v(" "),t._m(13),t._m(14),t._v(" "),s("p",[t._v("在编写调试Node.js项目，修改代码后，需要频繁的手动close掉，然后再重新启动，非常繁琐。现在，我们可以使用nodemon这个工具，它的作用是监听代码文件的变动，当代码改变之后，自动重启。当然还有其他工具比如supervisor，forever等\n当前我们引入nodemon")]),t._v(" "),t._m(15),s("p",[t._v("然后就可以使用nodemon启动应用，当代码更改后，重新访问就会访问最新的最新的改变代码了。")]),t._v(" "),t._m(16),t._m(17),t._v(" "),s("p",[t._v("我们在项目根目录下新建routes目录")]),t._v(" "),s("p",[t._v("用命令行创建如下，也可以手动创建")]),t._v(" "),t._m(18),t._m(19),t._v(" "),s("p",[t._v("前面我们已经安装路由中间件了，示例代码如下\n更详细的路由写法可参见"),s("a",{attrs:{href:"https://github.com/koajs/router/blob/master/API.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("路由官方API"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("也可以按照自己业务组织路由文件，然后导入到路由主文件里面统一导入到应用里面去。")]),t._v(" "),t._m(20),s("p",[t._v("然后在app.js里面添加路由文件")]),t._v(" "),t._m(21),s("h2",{attrs:{id:"代码演示"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#代码演示"}},[t._v("#")]),t._v(" "),s("a",{attrs:{href:"https://gitee.com/debingfeng/koa-mock-api",target:"_blank",rel:"noopener noreferrer"}},[t._v("代码演示"),s("OutboundLink")],1)])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"koa搭建api"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#koa搭建api"}},[this._v("#")]),this._v(" koa搭建api")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"table-of-contents"},[e("ul",[e("li",[e("a",{attrs:{href:"#初始化项目项目"}},[this._v("初始化项目项目")])]),e("li",[e("a",{attrs:{href:"#安装koa和相关中间件"}},[this._v("安装koa和相关中间件")]),e("ul",[e("li",[e("a",{attrs:{href:"#koa"}},[this._v("koa")])]),e("li",[e("a",{attrs:{href:"#安装中间件"}},[this._v("安装中间件")])])])]),e("li",[e("a",{attrs:{href:"#创建应用入口-app-js"}},[this._v("创建应用入口 - app.js")])]),e("li",[e("a",{attrs:{href:"#构造路由"}},[this._v("构造路由")])]),e("li",[e("a",{attrs:{href:"#代码演示-https-gitee-com-debingfeng-koa-mock-api"}},[this._v("代码演示")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"初始化项目项目"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#初始化项目项目"}},[this._v("#")]),this._v(" 初始化项目项目")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("mkdir mock-api\n\ncd && npm init\n\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"安装koa和相关中间件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装koa和相关中间件"}},[this._v("#")]),this._v(" 安装koa和相关中间件")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"koa"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#koa"}},[this._v("#")]),this._v(" koa")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("npm install koa\n\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"安装中间件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装中间件"}},[this._v("#")]),this._v(" 安装中间件")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("npm install koa-router koa-logger @koa/cors \n\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"创建应用入口-app-js"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建应用入口-app-js"}},[this._v("#")]),this._v(" 创建应用入口 - app.js")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("在项目根目录创建app.js，代码如下")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("const Koa = require('koa');\nconst logger = require('koa-logger');\nconst cors = require('@koa/cors');\n\n\nconst app = new Koa();\n\napp.use(logger());\napp.use(cors());\n\napp.listen(9002,()=>{\n    console.info('koa starts at port 9002!');\n});\n\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("strong",[this._v("启动应用")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("node app.js\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("strong",[this._v("开发调试")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("npm i -g nodemon\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("nodemon app.js\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"构造路由"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#构造路由"}},[this._v("#")]),this._v(" 构造路由")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("mkdir routes\n\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("strong",[this._v("编写路由主文件index.js，在routes下新建index.js")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("let Router = require('@koa/router');\n\nlet router = new Router();\n\nrouter.get('/', (ctx, next) => {\n    ctx.body = 'Hello World!';\n});\n\nrouter.post('/users', (ctx, next) => {\n    // ...\n});\n\nrouter.put('/users/:id', (ctx, next) => {\n    // ...\n});\n\nrouter.del('/users/:id', (ctx, next) => {\n    // ...\n});\n\nrouter.all('/users/:id', (ctx, next) => {\n    // ...\n});\n\nmodule.exports = router;\n\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("\nconst router = require('./routes/index');\n\n\n\n\napp.use(router.routes());\napp.use(router.allowedMethods());\n\n\n")])])])}],!1,null,null,null);e.default=a.exports}}]);